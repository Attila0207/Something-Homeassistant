blueprint:
  name: Hue Wandschalter über MQTT steuert Deckenleuchte
  description: Steuert eine Deckenleuchte über MQTT-Tastenevents vom Hue Wandschalter Modul.
  domain: automation
  input:
    mqtt_topic:
      name: MQTT Topic
      description: Das Topic, über das der Schalter sendet (z. B. zigbee2mqtt/hue_switch/action).
      selector:
        text:
    light_target:
      name: Licht (Deckenleuchte)
      description: Die Deckenleuchte, die du mit dem Schalter steuern willst.
      selector:
        target:
          entity:
            domain: light

trigger:
  platform: mqtt
  topic: !input mqtt_topic

variables:
  payload: "{{ trigger.payload }}"

action:
  choose:
    - conditions:
        - condition: template
          value_template: "{{ payload == 'on' }}"
      sequence:
        - service: light.turn_on
          target: !input light_target
    - conditions:
        - condition: template
          value_template: "{{ payload == 'off' }}"
      sequence:
        - service: light.turn_off
          target: !input light_target
    - conditions:
        - condition: template
          value_template: "{{ payload == 'up' }}"
      sequence:
        - service: light.turn_on
          target: !input light_target
        - service: light.increase_brightness
          data:
            brightness_step_pct: 10
          target: !input light_target
    - conditions:
        - condition: template
          value_template: "{{ payload == 'down' }}"
      sequence:
        - service: light.decrease_brightness
          data:
            brightness_step_pct: 10
          target: !input light_target

mode: restart
